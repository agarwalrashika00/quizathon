<div class="show_quiz">
  <%= render @quiz, rating: @rating %>
  <br />
  <div class='ml-4 mr-4 mb-4'>
    <h4> Comments:</h4>
    <% @quiz.comments.each do |comment| %>
      <% if comment.parent_comment_id.blank? %>
        <div class="row mt-4">
          <div class="col-sm-2 pt-2">
            <% if comment.user.profile_photo.present? %>
              <%= image_tag comment.user.profile_photo, height: '60px' %>
            <% else %>
              <%= image_tag 'default_profile.png', height: '60px' %>
            <% end %>
          </div>
          <div class="col-sm-10">
            <b><%= comment.user.full_name %></b>
            <%= comment.data %>
            <%= link_to_add_comment 'Reply', @quiz, comment %>
            <% comment.child_comments.each do |child_comment| %>
              <div class="row">
                <div class="col-sm-2">
                  <% if child_comment.user.profile_photo.present? %>
                    <%= image_tag child_comment.user.profile_photo, height: '60px' %>
                  <% else %>
                    <%= image_tag 'default_profile.png', height: '60px' %>
                  <% end %>
                </div>
                <div class="col-sm-10">
                  <b><%= child_comment.user.full_name %></b>
                  <%= child_comment.data %>
                </div>
              </div>
            <% end %>
          </div>
        </div>
      <% end %>
    <% end %>
  </div>
  <div class="ml-4 mr-4 mb-2">
    <%= form_with model: Comment.new, url: comment_quiz_path(@quiz) do |form| %>
      <div class="w-50">
        <%= form.rich_text_area :data, placeholer: 'Add new comment' %>
      </div>
      <%= form.hidden_field :user_id, value: current_user.id %>
      <%= form.submit 'Comment', class: 'mt-2 btn btn-primary' %>
    <% end %>
  </div>
</div>
